<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana Ã–zel Bir Buket</title>
    <style>
        /* --- GENEL TASARIM --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        h1, h2 { color: #555; }

        /* --- KONTROL PANELÄ° (Sadece gÃ¶nderen gÃ¶rÃ¼r) --- */
        #creatorPanel {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            z-index: 100;
            margin-bottom: 20px;
            max-width: 90%;
            width: 400px;
        }

        select, input, button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 16px;
            box-sizing: border-box;
        }

        button {
            background-color: #ff8fab;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }

        button:hover { background-color: #fb6f92; transform: scale(1.02); }
        
        .btn-random { background-color: #a29bfe; }
        .btn-link { background-color: #00b894; }

        /* --- BUKET ALANI --- */
        .bouquet-wrapper {
            position: relative;
            width: 320px;
            height: 450px;
            margin-top: 50px;
            /* Buket gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nde hafif sÃ¼zÃ¼lerek gelsin */
            animation: floatIn 1s ease-out;
        }

        /* Vazo KÄ±smÄ± (CSS ile Ã§izim) */
        .vase {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 180px;
            background: linear-gradient(to right, #a8c0ff, #3f2b96);
            border-radius: 0 0 40px 40px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            z-index: 20;
        }
        
        .vase::after { /* Vazonun aÄŸzÄ± */
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            width: 100%;
            height: 20px;
            background-color: #8fa1e0;
            border-radius: 50%;
        }

        /* Ã‡iÃ§eklerin SaplarÄ± */
        .stems {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 100px;
            background-color: #4CAF50;
            box-shadow: -20px 0 0 #4CAF50, 20px 0 0 #4CAF50;
            z-index: 5;
        }

        /* Ã‡iÃ§ek SÄ±nÄ±fÄ± */
        .flower {
            position: absolute;
            bottom: 150px; /* Vazonun Ã¼stÃ¼nden baÅŸla */
            left: 50%;
            width: 80px;
            height: 80px;
            background-size: cover;
            transform-origin: bottom center; /* DÃ¶nme noktasÄ± */
            transition: all 0.5s ease;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.3));
            
            /* VarsayÄ±lan Ã§iÃ§ek ÅŸekli (Resim yoksa CSS ile papatya yapalÄ±m) */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px; /* Emoji boyutu */
        }

        /* Not KartÄ± */
        .note-card {
            margin-top: -30px;
            background: #fff8e1;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 300px;
            text-align: center;
            font-style: italic;
            color: #555;
            position: relative;
            z-index: 30;
            border: 1px solid #ffe082;
            display: none; /* JS ile aÃ§Ä±lacak */
            animation: popUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* PaylaÅŸÄ±m Linki Kutusu */
        #shareArea {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background: #e0f7fa;
            border: 1px dashed #00bcd4;
            font-size: 14px;
            word-break: break-all;
        }

        @keyframes floatIn { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popUp { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    </style>
</head>
<body>

    <div id="creatorPanel">
        <h2>ğŸ’ Buket OluÅŸturucu</h2>
        <p>Sevdiklerin iÃ§in Ã¶zel bir dijital buket tasarla.</p>
        
        <select id="zodiacSelect">
            <option value="">Bir BurÃ§ SeÃ§iniz...</option>
            <option value="koc">KoÃ§ (Lale - Enerjik)</option>
            <option value="boga">BoÄŸa (GÃ¼l - Zarif)</option>
            <option value="ikizler">Ä°kizler (Mimoza - NeÅŸeli)</option>
            <option value="yengec">YengeÃ§ (Beyaz GÃ¼l - Duygusal)</option>
            <option value="aslan">Aslan (AyÃ§iÃ§eÄŸi - GÃ¶steriÅŸli)</option>
            <option value="basak">BaÅŸak (Krizantem - DetaycÄ±)</option>
            <option value="terazi">Terazi (Ortanca - Dengeli)</option>
            <option value="akrep">Akrep (Karanfil - Tutkulu)</option>
            <option value="yay">Yay (Zambak - Ã–zgÃ¼r)</option>
            <option value="oglak">OÄŸlak (Karanfil - Ciddi)</option>
            <option value="kova">Kova (Orkide - Ã–zgÃ¼n)</option>
            <option value="balik">BalÄ±k (Nergis - Hayalperest)</option>
        </select>

        <textarea id="userNote" placeholder="Buraya gÃ¼zel bir not yaz..." rows="3" style="width:100%; border:1px solid #ddd; border-radius:8px; padding:10px;"></textarea>

        <button onclick="previewBouquet()">Buketi Ã–nizle</button>
        <button class="btn-random" onclick="createRandomBouquet()">Rastgele SÃ¼rpriz Yap</button>
        <hr>
        <button class="btn-link" onclick="generateShareLink()">ğŸ”— Link OluÅŸtur ve Kopyala</button>

        <div id="shareArea">Link kopyalandÄ±! ArkadaÅŸÄ±na gÃ¶nderebilirsin.</div>
    </div>

    <div class="bouquet-wrapper" id="bouquetWrapper" style="display:none;"> <div class="stems"></div>
        <div class="vase"></div>
        <div id="flowersContainer"></div>
    </div>

    <div id="displayNote" class="note-card"></div>
    
    <button id="createNewBtn" style="display:none; width: 200px; margin-top:30px;" onclick="window.location.href=window.location.pathname">
        Kendi Buketini Tasarla ğŸŒ¸
    </button>

    <script>
        // --- 1. VERÄ° YAPISI ---
        // Her burÃ§ iÃ§in bir emoji ve renk tanÄ±mladÄ±k. Ä°stersen emoji yerine resim URL'si koyabilirsin.
        const flowerDb = {
            'koc': { icon: 'ğŸŒ·', color: '#FF4500', count: 8 },
            'boga': { icon: 'ğŸŒ¹', color: '#DC143C', count: 10 },
            'ikizler': { icon: 'ğŸŒ¼', color: '#FFD700', count: 9 },
            'yengec': { icon: 'ğŸ’®', color: '#FFFACD', count: 7 },
            'aslan': { icon: 'ğŸŒ»', color: '#FFA500', count: 6 },
            'basak': { icon: 'ğŸŒ¾', color: '#F4A460', count: 12 },
            'terazi': { icon: 'ğŸŒ¸', color: '#FF69B4', count: 9 },
            'akrep': { icon: 'ğŸ¥€', color: '#8B0000', count: 7 },
            'yay': { icon: 'ğŸŒº', color: '#9370DB', count: 8 },
            'oglak': { icon: 'ğŸµï¸', color: '#2F4F4F', count: 9 },
            'kova': { icon: 'ğŸª·', color: '#BA55D3', count: 6 },
            'balik': { icon: 'ğŸ’', color: '#87CEEB', count: 10 }
        };

        const container = document.getElementById('flowersContainer');
        const noteDiv = document.getElementById('displayNote');
        const wrapper = document.getElementById('bouquetWrapper');
        const panel = document.getElementById('creatorPanel');

        // --- 2. FONKSÄ°YONLAR ---

        // Ã‡iÃ§ekleri Ekrana Ã‡izme (Matematiksel DaÄŸÄ±lÄ±m)
        function renderFlowers(key, isRandom = false) {
            container.innerHTML = ''; // Temizle
            wrapper.style.display = 'block';

            let data;
            
            if (isRandom) {
                // Rastgele bir burÃ§ seÃ§
                const keys = Object.keys(flowerDb);
                const randomKey = keys[Math.floor(Math.random() * keys.length)];
                data = flowerDb[randomKey];
            } else {
                data = flowerDb[key];
            }

            if (!data) return; // Hata kontrolÃ¼

            // Dolgunluk iÃ§in Ã§iÃ§ekleri yerleÅŸtir
            for (let i = 0; i < data.count; i++) {
                const el = document.createElement('div');
                el.classList.add('flower');
                el.innerText = data.icon; // Emoji kullanÄ±yoruz
                
                // --- DOLGUNLUK MANTIÄI ---
                // AÃ§Ä±yÄ± hesapla: Merkezden saÄŸa ve sola daÄŸÄ±l
                // Toplam aÃ§Ä± aralÄ±ÄŸÄ±: 100 derece (-50 ile +50 arasÄ±)
                const angleStep = 100 / (data.count - 1);
                const rotation = -50 + (i * angleStep) + (Math.random() * 10 - 5); // Hafif rastgelelik ekle
                
                // YÃ¼kseklik farkÄ± (Ortadakiler daha yukarÄ±da)
                const heightVar = Math.abs(rotation) * 1.5; 
                const scaleVar = 0.8 + Math.random() * 0.4; // Boyut Ã§eÅŸitliliÄŸi

                el.style.transform = `translateX(-50%) rotate(${rotation}deg) translateY(${heightVar}px) scale(${scaleVar})`;
                el.style.zIndex = i; // Arka arkaya dizilim

                // Hafif renk filtresi ekle (Ã‡eÅŸitlilik iÃ§in)
                el.style.textShadow = `0 0 10px ${data.color}`;

                container.appendChild(el);
            }
        }

        // Ã–nizleme Modu
        function previewBouquet() {
            const zodiac = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;

            if(!zodiac) { alert("LÃ¼tfen bir burÃ§ seÃ§!"); return; }

            renderFlowers(zodiac);
            
            if(note) {
                noteDiv.innerText = `"${note}"`;
                noteDiv.style.display = 'block';
            } else {
                noteDiv.style.display = 'none';
            }
        }

        // Rastgele Mod
        function createRandomBouquet() {
            renderFlowers(null, true);
            noteDiv.innerText = "Evrenin sana bir mesajÄ± var: BugÃ¼n harikasÄ±n! âœ¨";
            noteDiv.style.display = 'block';
            document.getElementById('userNote').value = "SÃ¼rpriz Buket! ğŸŒ¸";
        }

        // --- 3. LINK OLUÅTURMA (Backend Olmadan) ---
        function generateShareLink() {
            const zodiac = document.getElementById('zodiacSelect').value;
            let note = document.getElementById('userNote').value;
            
            // EÄŸer seÃ§im yapÄ±lmadÄ±ysa ama rastgele basÄ±ldÄ±ysa, o anki durumu almamÄ±z zor.
            // Basitlik iÃ§in kullanÄ±cÄ±dan seÃ§im yapmasÄ±nÄ± isteyelim.
            if(!zodiac) {
                alert("Link oluÅŸturmak iÃ§in lÃ¼tfen listeden bir burÃ§ seÃ§.");
                return;
            }

            // Veriyi URL parametresine dÃ¶nÃ¼ÅŸtÃ¼r
            // encodeURIComponent: Ã–zel karakterlerin (boÅŸluk, & gibi) linki bozmasÄ±nÄ± engeller.
            const baseUrl = window.location.href.split('?')[0]; // Temiz URL
            const finalUrl = `${baseUrl}?zodiac=${zodiac}&note=${encodeURIComponent(note)}`;

            // Linki kopyala
            navigator.clipboard.writeText(finalUrl).then(() => {
                const shareArea = document.getElementById('shareArea');
                shareArea.style.display = 'block';
                shareArea.innerHTML = `<strong>Link KopyalandÄ±!</strong><br><a href="${finalUrl}" target="_blank">${finalUrl}</a>`;
            });
        }

        // --- 4. SAYFA YÃœKLENDÄ°ÄÄ°NDE (ALICI MODU) ---
        window.onload = function() {
            // URL'deki parametreleri oku
            const urlParams = new URLSearchParams(window.location.search);
            const zodiacParam = urlParams.get('zodiac');
            const noteParam = urlParams.get('note');

            if (zodiacParam) {
                // EÄER LÄ°NK Ä°LE GELÄ°NDÄ°YSE:
                // 1. OluÅŸturucu panelini gizle
                panel.style.display = 'none';
                
                // 2. Buketi oluÅŸtur
                renderFlowers(zodiacParam);
                
                // 3. Notu gÃ¶ster
                if (noteParam) {
                    noteDiv.innerText = `ğŸ’Œ "${noteParam}"`;
                    noteDiv.style.display = 'block';
                }

                // 4. "Sen de yap" butonunu gÃ¶ster
                document.getElementById('createNewBtn').style.display = 'block';
            }
        };
    </script>
</body>
</html>