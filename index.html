<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MasalsÄ± Buket</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <style>
        /* --- AYDINLIK PASTEL ATMOSFER --- */
        body {
            font-family: 'Quicksand', sans-serif;
            background: radial-gradient(circle at center, #fdfbfb 0%, #ebedee 100%);
            background: linear-gradient(120deg, #fccb90 0%, #d57eeb 100%); /* Pastel GÃ¶kkuÅŸaÄŸÄ± */
            background-size: 200% 200%;
            animation: gradientMove 10s ease infinite;
            margin: 0; padding: 0; height: 100vh;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            overflow: hidden;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- SAKÄ°N UÃ‡UÅAN KELEBEKLER (EMOJÄ°) --- */
        .bg-butterfly {
            position: absolute;
            font-size: 25px;
            opacity: 0.6;
            pointer-events: none;
            user-select: none;
            z-index: 0;
            animation: floatAround linear infinite;
        }

        @keyframes floatAround {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(50px, -50px) rotate(10deg); }
            50% { transform: translate(0, -100px) rotate(-10deg); }
            75% { transform: translate(-50px, -50px) rotate(10deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        /* --- PANEL --- */
        #creatorPanel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 90%; max-width: 350px;
            text-align: center; z-index: 1000;
        }

        h1 { font-family: 'Great Vibes', cursive; color: #d81b60; margin: 0; font-size: 36px; }
        
        select, textarea {
            width: 100%; padding: 12px; margin: 10px 0;
            border-radius: 10px; border: 2px solid #fff;
            background: rgba(255,255,255,0.6); outline: none;
            font-family: inherit;
        }
        
        button {
            width: 100%; padding: 12px;
            background: #ff9a9e; color: white; border: none;
            border-radius: 50px; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
            transition: transform 0.2s;
        }
        button:hover { transform: scale(1.05); }

        /* --- SAHNE --- */
        #sceneContainer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 50px; z-index: 500;
        }

        .bouquet-wrapper {
            position: relative; width: 300px; height: 500px;
            margin-bottom: 20px;
            animation: softBounce 3s ease-in-out infinite;
        }

        /* --- KAÄIT BUKET (CSS Ä°le) --- */
        .paper-wrap {
            position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-top: 300px solid #f8bbd0; /* KaÄŸÄ±t Rengi */
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));
            z-index: 10;
        }
        .paper-wrap::after {
            content: ''; position: absolute; top: -300px; left: -100px;
            width: 200px; height: 60px;
            background: #f48fb1; border-radius: 50%; /* KaÄŸÄ±dÄ±n iÃ§i */
        }

        /* --- Ã‡Ä°Ã‡EKLERÄ°N DÃœZENÄ° --- */
        .flower-item {
            position: absolute;
            font-size: 60px; /* BÃ¼yÃ¼k net Ã§iÃ§ekler */
            line-height: 1;
            transform-origin: bottom center;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1));
            transition: all 0.5s ease;
            /* Ã‡iÃ§ekler kaÄŸÄ±dÄ±n iÃ§inden Ã§Ä±kacak */
        }

        /* --- NOT KARTI --- */
        .note-card {
            position: absolute; bottom: 120px; left: 50%;
            transform: translateX(-50%) rotate(-3deg);
            background: white; padding: 15px; width: 160px;
            border-radius: 5px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center; font-family: 'Great Vibes', cursive;
            font-size: 22px; color: #880e4f;
            z-index: 20; /* KaÄŸÄ±dÄ±n Ã¼zerinde */
            border-top: 3px solid #ff9a9e;
            opacity: 0; animation: popIn 0.5s forwards 0.5s;
        }

        #actionArea { position: fixed; bottom: 30px; text-align: center; display: none; z-index: 1000; }
        .action-btn { background: white; color: #d81b60; padding: 10px 25px; border-radius: 20px; border: none; font-weight: bold; cursor: pointer; box-shadow: 0 5px 10px rgba(0,0,0,0.1); }

        @keyframes softBounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes popIn { from { transform: translateX(-50%) scale(0); opacity: 0; } to { transform: translateX(-50%) rotate(-3deg) scale(1); opacity: 1; } }

    </style>
</head>
<body>

    <div id="butterflyContainer"></div>

    <div id="creatorPanel">
        <h1>MasalsÄ± Buket</h1>
        <p>Sevdiklerine solmayan Ã§iÃ§ekler gÃ¶nder.</p>

        <select id="zodiacSelect">
            <option value="">Bir Ã‡iÃ§ek SeÃ§...</option>
            <option value="koc">Lale ğŸŒ·</option>
            <option value="boga">GÃ¼l ğŸŒ¹</option>
            <option value="ikizler">Papatya ğŸŒ¼</option>
            <option value="yengec">NilÃ¼fer ğŸª·</option>
            <option value="aslan">AyÃ§iÃ§eÄŸi ğŸŒ»</option>
            <option value="basak">BaÅŸak ğŸŒ¾</option>
            <option value="terazi">Hibiskus ğŸŒº</option>
            <option value="akrep">SolmuÅŸ GÃ¼l ğŸ¥€</option>
            <option value="yay">Mor Ã‡iÃ§ek ğŸª»</option>
            <option value="oglak">Rozet ğŸµï¸</option>
            <option value="kova">Orkide ğŸ’</option>
            <option value="balik">Bahar DalÄ± ğŸ’®</option>
        </select>
        
        <textarea id="userNote" rows="3" placeholder="Notunuzu buraya yazÄ±n..."></textarea>
        
        <button onclick="createBouquet()">Buketi HazÄ±rla âœ¨</button>
    </div>

    <div id="sceneContainer">
        <div class="bouquet-wrapper">
            <div id="flowersContainer"></div>
            
            <div class="paper-wrap"></div>

            <div class="note-card" id="displayNote"></div>
        </div>
    </div>

    <div id="actionArea">
        <button class="action-btn" onclick="copyLink()">ğŸ”— Linki Kopyala</button>
        <div id="copyMsg" style="color:white; font-size:12px; margin-top:5px; display:none; text-shadow:0 1px 1px rgba(0,0,0,0.2);">KopyalandÄ±!</div>
    </div>

    <script>
        // --- 1. KELEBEKLERÄ° OLUÅTUR (Sakin Animasyon) ---
        function initButterflies() {
            const container = document.getElementById('butterflyContainer');
            for(let i=0; i<12; i++) { // 12 Kelebek
                const b = document.createElement('div');
                b.className = 'bg-butterfly';
                b.innerText = 'ğŸ¦‹';
                
                // Rastgele Konum
                b.style.left = Math.random() * 100 + 'vw';
                b.style.top = Math.random() * 100 + 'vh';
                
                // Rastgele Boyut (UzaklÄ±k hissi iÃ§in)
                const size = 15 + Math.random() * 20;
                b.style.fontSize = size + 'px';
                
                // Animasyon SÃ¼resi (FarklÄ± hÄ±zlar)
                b.style.animationDuration = (10 + Math.random() * 20) + 's';
                b.style.animationDelay = (Math.random() * 5) + 's';
                
                container.appendChild(b);
            }
        }
        initButterflies();

        // --- 2. Ã‡Ä°Ã‡EK VERÄ°LERÄ° ---
        const flowers = {
            'koc': 'ğŸŒ·', 'boga': 'ğŸŒ¹', 'ikizler': 'ğŸŒ¼', 'yengec': 'ğŸª·',
            'aslan': 'ğŸŒ»', 'basak': 'ğŸŒ¾', 'terazi': 'ğŸŒº', 'akrep': 'ğŸ¥€',
            'yay': 'ğŸª»', 'oglak': 'ğŸµï¸', 'kova': 'ğŸ’', 'balik': 'ğŸ’®'
        };

        // --- 3. BUKET ALGORÄ°TMASI (Ãœst Ã¼ste binmeyi engellemek iÃ§in) ---
        function buildBouquet(code) {
            const container = document.getElementById('flowersContainer');
            container.innerHTML = '';
            const icon = flowers[code] || 'ğŸŒ¸';

            // Toplam 12 Ã§iÃ§ek yerleÅŸtireceÄŸiz, 3 sÄ±ra halinde.
            // Bu koordinatlar "KaÄŸÄ±dÄ±n Ä°Ã§inden" Ã§Ä±kacak ÅŸekilde ayarlandÄ±.
            
            const positions = [
                // Arka SÄ±ra (En geniÅŸ, en yukarÄ±da, Z-index dÃ¼ÅŸÃ¼k)
                { bottom: 380, left: -60, z: 1, rot: -20 },
                { bottom: 390, left: -20, z: 1, rot: -10 },
                { bottom: 390, left: 20, z: 1, rot: 10 },
                { bottom: 380, left: 60, z: 1, rot: 20 },

                // Orta SÄ±ra (Biraz aÅŸaÄŸÄ±da, Z-index orta)
                { bottom: 330, left: -40, z: 2, rot: -15 },
                { bottom: 340, left: 0,   z: 2, rot: 0 },
                { bottom: 330, left: 40,  z: 2, rot: 15 },

                // Ã–n SÄ±ra (En aÅŸaÄŸÄ±da, Z-index yÃ¼ksek, kaÄŸÄ±da yakÄ±n)
                { bottom: 280, left: -25, z: 3, rot: -10 },
                { bottom: 280, left: 25,  z: 3, rot: 10 }
            ];

            positions.forEach((pos, index) => {
                const el = document.createElement('div');
                el.className = 'flower-item';
                el.innerText = icon;
                
                // CSS KonumlandÄ±rma
                // left: 50% + pos.left (Merkezden sapma)
                el.style.left = `calc(50% + ${pos.left}px)`;
                el.style.bottom = `${pos.bottom}px`;
                el.style.zIndex = pos.z;
                
                // Hafif rastgelelik (DoÄŸal durmasÄ± iÃ§in ama Ã§ok deÄŸil)
                const randomRot = pos.rot + (Math.random() * 10 - 5);
                el.style.transform = `translateX(-50%) rotate(${randomRot}deg) scale(0.9)`;

                // Animasyon (SÄ±rayla aÃ§Ä±lma)
                el.style.opacity = 0;
                el.style.animation = `popIn 0.5s forwards ${index * 0.1}s`;

                container.appendChild(el);
            });
        }

        function createBouquet() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            if(!val) { alert("LÃ¼tfen bir Ã§iÃ§ek seÃ§in âœ¨"); return; }

            document.getElementById('creatorPanel').style.display = 'none';
            document.getElementById('sceneContainer').style.display = 'flex';
            document.getElementById('actionArea').style.display = 'block';

            buildBouquet(val);

            const card = document.getElementById('displayNote');
            if(note) {
                card.innerText = note;
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        }

        function copyLink() {
            const url = `${window.location.href.split('?')[0]}?s=${document.getElementById('zodiacSelect').value}&n=${encodeURIComponent(document.getElementById('userNote').value)}`;
            navigator.clipboard.writeText(url).then(() => {
                const msg = document.getElementById('copyMsg');
                msg.style.display = 'block'; setTimeout(()=>msg.style.display='none', 2000);
            });
        }

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const s = params.get('s');
            const n = params.get('n');
            if(s) {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                document.getElementById('actionArea').style.display = 'block';
                document.getElementById('zodiacSelect').value = s;
                
                buildBouquet(s);

                const card = document.getElementById('displayNote');
                if(n) { card.innerText = n; card.style.display='block'; }
                else { card.style.display='none'; }

                const btn = document.querySelector('.action-btn');
                btn.innerText = "ğŸŒ¸ Sen de Yap";
                btn.onclick = () => window.location.href = window.location.pathname;
            }
        }
    </script>
</body>
</html>
