<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana Ã–zel Ã‡iÃ§ekler</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Great+Vibes&family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <style>
        /* --- YENÄ° ATMOSFER (Toz Pembe) --- */
        body {
            font-family: 'Lato', sans-serif;
            /* Toz pembe arka plan */
            background: radial-gradient(circle at center, #fad0c4 0%, #f6d365 100%);
            background-blend-mode: soft-light;
            background-color: #ffdde1; /* Ana toz pembe rengi */
            margin: 0; padding: 0; min-height: 100vh;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            overflow: hidden; perspective: 1200px;
        }

        /* Rengarenk UÃ§uÅŸan Kelebekler */
        .bg-butterfly {
            position: absolute; pointer-events: none; z-index: 1;
            width: 35px; height: 35px;
            background-image: url('https://cdn-icons-png.flaticon.com/512/2909/2909995.png');
            background-size: cover;
            opacity: 0.7;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            /* Renk deÄŸiÅŸtirmek iÃ§in hue-rotate kullanÄ±lacak */
        }

        /* --- KONTROL PANELÄ° --- */
        #creatorPanel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 40px; border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.05);
            border: 1px solid rgba(255, 255, 255, 0.8);
            width: 90%; max-width: 380px;
            text-align: center; z-index: 1000;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        h2 { font-family: 'Playfair Display', serif; color: #d81b60; margin-bottom: 10px; }
        
        select, textarea {
            width: 100%; padding: 15px; margin: 12px 0;
            border-radius: 15px; border: 2px solid #ffcdd2;
            background: #fff; font-family: 'Lato', sans-serif;
            outline: none; transition: border 0.3s; color: #555;
        }
        select:focus, textarea:focus { border-color: #d81b60; }

        button {
            width: 100%; padding: 15px; margin-top: 20px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #d81b60; border: none; border-radius: 15px;
            font-weight: bold; font-size: 16px; cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 154, 158, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(255, 154, 158, 0.5); }

        /* --- SAHNE --- */
        #sceneContainer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 40px; z-index: 500;
        }

        /* --- BUKET ALANI --- */
        .bouquet-wrapper {
            position: relative; width: 300px; height: 400px;
            margin-bottom: 60px;
            animation: hover 4s ease-in-out infinite;
        }

        /* VAZO */
        .vase {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 140px; height: 200px;
            background: linear-gradient(135deg, rgba(255,255,255,0.4), rgba(255,235,245,0.2));
            backdrop-filter: blur(5px);
            border-radius: 0 0 60px 60px;
            border: 2px solid rgba(255,255,255,0.6);
            box-shadow: 0 15px 35px rgba(216, 27, 96, 0.1);
            z-index: 20;
        }

        /* SAPLAR */
        .stems {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90px; height: 170px;
            background: repeating-linear-gradient(90deg, #8fb376 0px, #8fb376 3px, transparent 3px, transparent 15px);
            opacity: 0.6; mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
            z-index: 15;
        }

        /* EMOJÄ° Ã‡Ä°Ã‡EKLER */
        .flower-emoji {
            position: absolute; left: 50%; transform-origin: bottom center;
            font-size: 60px; /* BÃ¼yÃ¼k emojiler */
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
            user-select: none;
        }

        /* --- ZARF --- */
        .envelope-container {
            position: relative; width: 260px; height: 160px; cursor: pointer;
            z-index: 100; perspective: 1000px;
        }
        .envelope {
            position: relative; width: 100%; height: 100%;
            background: #f8bbd0; /* Koyu pembe zarf */
            border-radius: 8px; box-shadow: 0 15px 35px rgba(216, 27, 96, 0.15);
        }
        .envelope-flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 130px solid transparent; border-right: 130px solid transparent;
            border-top: 100px solid #f48fb1; /* Kapak rengi */
            transform-origin: top; transition: 0.6s ease-in-out; z-index: 5;
        }
        .envelope-container.open .envelope-flap { transform: rotateX(180deg); z-index: 1; }

        /* NOT KAÄIDI */
        .letter {
            position: absolute; bottom: 10px; left: 10px; width: 240px; height: 140px;
            background: #fff; padding: 25px; box-sizing: border-box; border-radius: 4px;
            font-family: 'Great Vibes', cursive; font-size: 24px; color: #d81b60;
            text-align: center; display: flex; align-items: center; justify-content: center;
            transition: transform 0.6s ease-in-out 0.2s; z-index: 2;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
        }
        .envelope-container.open .letter { transform: translateY(-130px); }

        .hint { position: absolute; bottom: 15px; width: 100%; text-align: center; font-size: 13px; color: #fff; animation: pulse 2s infinite; }

        /* --- BUTONLAR --- */
        #shareArea { position: fixed; bottom: 30px; z-index: 1000; display: none; width: 90%; max-width: 320px; }
        .share-btn { background: #fff; color: #d81b60; box-shadow: 0 8px 20px rgba(216, 27, 96, 0.2); }

        /* Animasyonlar */
        @keyframes hover { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-15px);} }
        @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.6;} }
        @keyframes float { 0%{transform:translate(0,0) rotate(0deg);} 100%{transform:translate(var(--tx), var(--ty)) rotate(var(--tr));} }
    </style>
</head>
<body>

    <div id="bgEffects"></div>

    <div id="creatorPanel">
        <h2>ğŸŒ¸ Sevgi Buketi</h2>
        <p style="color:#888; font-size:14px;">En tatlÄ± emojilerle sevgini gÃ¶nder.</p>
        
        <select id="zodiacSelect">
            <option value="">Bir BurÃ§ SeÃ§iniz...</option>
            <option value="koc">KoÃ§ â€¢ Tutkulu Lale ğŸŒ·</option>
            <option value="boga">BoÄŸa â€¢ Zarif GÃ¼l ğŸŒ¹</option>
            <option value="ikizler">Ä°kizler â€¢ NeÅŸeli Papatya ğŸŒ¼</option>
            <option value="yengec">YengeÃ§ â€¢ Masum Ã‡iÃ§ek ğŸ’®</option>
            <option value="aslan">Aslan â€¢ IÅŸÄ±ltÄ±lÄ± AyÃ§iÃ§eÄŸi ğŸŒ»</option>
            <option value="basak">BaÅŸak â€¢ Saf BaÅŸak ğŸŒ¾</option>
            <option value="terazi">Terazi â€¢ Dengeli Pembe ğŸŒ¸</option>
            <option value="akrep">Akrep â€¢ Derin GÃ¼l ğŸ¥€</option>
            <option value="yay">Yay â€¢ Ã–zgÃ¼r Hibiskus ğŸŒº</option>
            <option value="oglak">OÄŸlak â€¢ Asil Rozet ğŸµï¸</option>
            <option value="kova">Kova â€¢ Ã–zgÃ¼n NilÃ¼fer ğŸª·</option>
            <option value="balik">BalÄ±k â€¢ Hayalci Buket ğŸ’</option>
        </select>
        
        <textarea id="userNote" rows="3" placeholder="ZarfÄ±n iÃ§ine gizlenecek o tatlÄ± not..."></textarea>
        
        <button onclick="generateBouquet()">âœ¨ Buketi HazÄ±rla</button>
    </div>

    <div id="sceneContainer">
        <div class="bouquet-wrapper">
            <div class="stems"></div>
            <div id="flowersContainer"></div>
            <div class="vase"></div>
        </div>

        <div class="envelope-container" id="envelopeBox" onclick="openLetter()">
            <div class="envelope">
                <div class="envelope-flap"></div>
                <div class="letter">
                    <span id="finalNote">Notunuz...</span>
                </div>
                <div class="hint">AÃ§mak iÃ§in dokun ğŸ’Œ</div>
            </div>
        </div>

        <div id="shareArea">
            <button class="share-btn" onclick="copyUrl()">ğŸ”— Linki Kopyala ve GÃ¶nder</button>
            <div id="copyFeedback" style="text-align:center; font-size:13px; color:#d81b60; display:none; margin-top:8px;">Panoya kopyalandÄ±! âœ¨</div>
        </div>
    </div>

    <script>
        /* --- EMOJÄ° Ã‡Ä°Ã‡EKLER --- */
        const flowers = {
            'koc':    { icon: 'ğŸŒ·', count: 12, scaleBase: 1.0 },
            'boga':   { icon: 'ğŸŒ¹', count: 14, scaleBase: 1.0 },
            'ikizler':{ icon: 'ğŸŒ¼', count: 15, scaleBase: 0.9 },
            'yengec': { icon: 'ğŸ’®', count: 12, scaleBase: 1.1 },
            'aslan':  { icon: 'ğŸŒ»', count: 10, scaleBase: 1.2 },
            'basak':  { icon: 'ğŸŒ¾', count: 16, scaleBase: 0.9 },
            'terazi': { icon: 'ğŸŒ¸', count: 14, scaleBase: 1.0 },
            'akrep':  { icon: 'ğŸ¥€', count: 12, scaleBase: 1.1 },
            'yay':    { icon: 'ğŸŒº', count: 12, scaleBase: 1.1 },
            'oglak':  { icon: 'ğŸµï¸', count: 10, scaleBase: 1.2 },
            'kova':   { icon: 'ğŸª·', count: 10, scaleBase: 1.2 },
            'balik':  { icon: 'ğŸ’', count: 12, scaleBase: 1.1 }
        };

        /* --- RENGARENK KELEBEKLER --- */
        function initBackground() {
            const bg = document.getElementById('bgEffects');
            for(let i=0; i<15; i++) {
                const el = document.createElement('div');
                el.className = 'bg-butterfly';
                
                // Rastgele Renk (Hue Rotate)
                const hue = Math.floor(Math.random() * 360);
                el.style.filter = `hue-rotate(${hue}deg) drop-shadow(0 2px 4px rgba(0,0,0,0.1))`;

                // Rastgele Konum ve Hareket
                el.style.left = Math.random()*100 + 'vw';
                el.style.top = Math.random()*100 + 'vh';
                const tx = (Math.random()*200 - 100) + 'vw';
                const ty = (Math.random()*200 - 100) + 'vh';
                const tr = (Math.random()*360) + 'deg';
                const dur = (20 + Math.random()*40) + 's';
                
                el.style.setProperty('--tx', tx);
                el.style.setProperty('--ty', ty);
                el.style.setProperty('--tr', tr);
                el.style.animation = `float ${dur} linear infinite alternate`;
                
                bg.appendChild(el);
            }
        }
        initBackground();

        /* --- BUKET OLUÅTURMA (Emoji) --- */
        function buildBouquet(code) {
            const container = document.getElementById('flowersContainer');
            container.innerHTML = '';
            const data = flowers[code];
            if(!data) return;

            for(let i=0; i<data.count; i++) {
                // Resim yerine DIV iÃ§inde emoji kullanÄ±yoruz
                const el = document.createElement('div');
                el.innerText = data.icon;
                el.className = 'flower-emoji';

                const spread = 120; 
                const angle = -(spread/2) + (i * (spread/(data.count-1)));
                const rot = angle + (Math.random()*20 - 10);

                const isBack = (i % 2 === 0);
                let zIndex, bottom, scale, filter;

                if(isBack) { // Vazo ArkasÄ±
                    zIndex = 10;
                    bottom = 150 + Math.random()*40;
                    scale = (data.scaleBase * 0.8) + Math.random()*0.2;
                    filter = "brightness(0.9)";
                } else { // Vazo Ã–nÃ¼
                    zIndex = 30;
                    bottom = 120 + Math.random()*60;
                    scale = (data.scaleBase * 1.0) + Math.random()*0.3;
                    filter = "brightness(1.1)";
                }

                el.style.transform = `translateX(-50%) rotate(${rot}deg) scale(${scale})`;
                el.style.bottom = bottom + 'px';
                el.style.zIndex = zIndex;
                el.style.filter = filter;

                container.appendChild(el);
            }
        }

        function generateBouquet() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            if(!val) { alert("LÃ¼tfen bir burÃ§ seÃ§iniz ğŸŒ¸"); return; }

            document.getElementById('creatorPanel').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(val);
            }, 500);

            const finalNote = note ? note : "Sana Ã¶zel, sevgiyle... ğŸ’–";
            document.getElementById('finalNote').innerText = finalNote;
            document.getElementById('shareArea').style.display = 'block';
        }

        let opened = false;
        function openLetter() {
            if(opened) return; opened = true;
            document.getElementById('envelopeBox').classList.add('open');
            document.querySelector('.hint').style.display = 'none';
            
            // Zarf aÃ§Ä±lÄ±nca ekstra kelebekler
            for(let i=0; i<5; i++) {
                const b = document.createElement('div');
                b.className = 'bg-butterfly';
                b.style.left = '50%'; b.style.bottom = '200px'; b.style.zIndex = 500;
                const hue = Math.floor(Math.random() * 360);
                b.style.filter = `hue-rotate(${hue}deg)`;
                b.style.transition = 'all 2s ease-out';
                document.getElementById('sceneContainer').appendChild(b);
                setTimeout(() => {
                    b.style.transform = `translate(${Math.random()*300-150}px, -500px) rotate(${Math.random()*180}deg) scale(0.5)`;
                    b.style.opacity = 0;
                }, 50);
            }
        }

        function copyUrl() {
            const url = `${window.location.href.split('?')[0]}?s=${document.getElementById('zodiacSelect').value}&n=${encodeURIComponent(document.getElementById('userNote').value)}`;
            navigator.clipboard.writeText(url).then(() => {
                const fb = document.getElementById('copyFeedback');
                fb.style.display = 'block'; setTimeout(() => fb.style.display = 'none', 3000);
            });
        }

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const s = params.get('s'); const n = params.get('n');
            if(s && flowers[s]) {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(s);
                if(n) document.getElementById('finalNote').innerText = n;
                const btn = document.querySelector('.share-btn');
                btn.innerText = "ğŸŒ¸ Sen de Kendi Buketini Tasarla";
                btn.onclick = () => window.location.href = window.location.pathname;
                document.getElementById('shareArea').style.display = 'block';
            }
        };
    </script>
</body>
</html>
