<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana √ñzel Bir S√ºrpriz</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Great+Vibes&family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <style>
        /* --- ESTETƒ∞K ATMOSFER --- */
        body {
            font-family: 'Lato', sans-serif;
            background: radial-gradient(circle at center, #fffbf0 0%, #fcecfc 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            perspective: 1200px; /* 3D derinlik i√ßin */
        }

        /* --- KONTROL PANELƒ∞ (Giri≈ü) --- */
        #creatorPanel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.8);
            width: 90%;
            max-width: 400px;
            text-align: center;
            z-index: 1000;
            transition: all 0.5s ease;
        }

        h2 { font-family: 'Playfair Display', serif; color: #4a4a4a; margin-bottom: 5px; }
        p { color: #888; font-size: 14px; margin-bottom: 20px; }
        
        select, textarea {
            width: 100%; padding: 15px; margin: 10px 0;
            border-radius: 12px; border: 1px solid #e0c3c3;
            background: #fff; font-family: 'Lato', sans-serif;
            outline: none;
        }
        
        button {
            width: 100%; padding: 15px; margin-top: 15px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            color: white; border: none; border-radius: 12px;
            font-weight: bold; cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 154, 158, 0.3);
            transition: transform 0.2s;
        }
        button:hover { transform: translateY(-3px); }

        /* --- SAHNE ALANI (Buket & Zarf) --- */
        #sceneContainer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: none; /* JS ile a√ßƒ±lacak */
            flex-direction: column;
            align-items: center;
            justify-content: flex-end; /* A≈üaƒüƒ± hizalƒ± */
            padding-bottom: 50px;
            z-index: 500;
        }

        /* --- BUKET YAPISI (Kusursuz Hizalama) --- */
        .bouquet-wrapper {
            position: relative;
            width: 300px;
            height: 400px;
            margin-bottom: 20px;
            /* Buket hafif√ße s√ºz√ºls√ºn */
            animation: floatBouquet 4s ease-in-out infinite;
        }

        /* VAZO (Cam Efekti) */
        .vase {
            position: absolute;
            bottom: 0; left: 50%;
            transform: translateX(-50%);
            width: 140px; height: 180px;
            
            /* Ger√ßek√ßi Cam */
            background: linear-gradient(125deg, rgba(255,255,255,0.4), rgba(255,255,255,0.1));
            backdrop-filter: blur(5px); /* Arkadaki saplarƒ± flu g√∂sterir */
            border-radius: 0 0 50px 50px;
            border-left: 1px solid rgba(255,255,255,0.5);
            border-right: 1px solid rgba(255,255,255,0.5);
            border-bottom: 2px solid rgba(255,255,255,0.6);
            
            box-shadow: 0 15px 35px rgba(0,0,0,0.1), inset 0 0 20px rgba(255,255,255,0.2);
            z-index: 20; /* √ñnemli: √ái√ßeklerin ortasƒ±nda */
        }
        
        /* Vazonun Aƒüzƒ± (Parlaklƒ±k) */
        .vase::after {
            content: ''; position: absolute; top: -5px; left: 0; width: 100%; height: 15px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.1);
        }

        /* Vazonun i√ßindeki saplar */
        .stems {
            position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);
            width: 80px; height: 160px;
            background: repeating-linear-gradient(90deg, #6c8c4c 0px, #6c8c4c 2px, transparent 2px, transparent 10px);
            opacity: 0.6;
            mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
            z-index: 15; /* Vazonun i√ßinde */
        }

        /* √áƒ∞√áEKLER */
        .flower-img {
            position: absolute;
            left: 50%;
            transform-origin: bottom center;
            transition: all 0.5s ease;
            /* G√∂lgelendirme ile derinlik */
            filter: drop-shadow(2px 5px 5px rgba(0,0,0,0.15));
        }

        /* --- ZARF (Mektup) --- */
        .envelope-container {
            position: relative;
            width: 260px; height: 160px;
            cursor: pointer;
            z-index: 100; /* En √∂nde */
            margin-top: -80px; /* Vazonun √∂n√ºne hafif binsin */
        }

        .envelope {
            position: absolute; width: 100%; height: 100%;
            background: #f3e5f5; border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            transition: transform 0.3s;
        }
        .envelope:hover { transform: scale(1.02); }

        .envelope-flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 130px solid transparent;
            border-right: 130px solid transparent;
            border-top: 100px solid #e1bee7; /* Kapak rengi */
            transform-origin: top;
            transition: 0.6s ease;
            z-index: 5;
        }
        
        /* Zarf A√ßƒ±lƒ±nca */
        .envelope-container.open .envelope-flap { transform: rotateX(180deg); z-index: 1; }
        
        .letter {
            position: absolute; bottom: 0; left: 10px; width: 240px; height: 140px;
            background: #fff; padding: 20px; box-sizing: border-box;
            border-radius: 5px;
            font-family: 'Great Vibes', cursive; font-size: 24px; color: #d81b60;
            text-align: center;
            display: flex; align-items: center; justify-content: center;
            transition: 0.6s ease 0.3s;
            z-index: 2;
        }
        .envelope-container.open .letter { transform: translateY(-100px); }

        /* Tƒ±klama ƒ∞pucu */
        .hint {
            position: absolute; bottom: 10px; width: 100%; text-align: center;
            font-size: 12px; color: #888; animation: pulse 2s infinite;
        }

        /* --- BUTONLAR (Alt Kƒ±sƒ±m) --- */
        #shareArea {
            position: fixed; bottom: 20px; z-index: 1000;
            display: none; width: 90%; max-width: 300px;
        }
        .share-btn {
            background: white; color: #444; border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        /* --- S√úSLEMELER --- */
        .butterfly {
            position: absolute; width: 30px; height: 30px;
            background: url('https://cdn-icons-png.flaticon.com/512/2909/2909995.png') no-repeat center/cover;
            opacity: 0.8; pointer-events: none;
            z-index: 60;
        }

        @keyframes floatBouquet { 0%,100% {transform:translateY(0);} 50%{transform:translateY(-10px);} }
        @keyframes pulse { 0%,100% {opacity:1;} 50%{opacity:0.5;} }
        @keyframes fly1 { 0% {transform:translate(0,0);} 100% {transform:translate(100vw, -50vh);} }

    </style>
</head>
<body>

    <div id="bgEffects"></div>

    <div id="creatorPanel">
        <h2>üíê Buket Tasarƒ±mcƒ±sƒ±</h2>
        <p>En zarif √ßi√ßekleri se√ß, notunu ekle ve g√∂nder.</p>
        
        <select id="zodiacSelect">
            <option value="">Bir Bur√ß Se√ßiniz...</option>
            <option value="koc">Ko√ß (Lale - Tutku)</option>
            <option value="boga">Boƒüa (G√ºl - Zarafet)</option>
            <option value="ikizler">ƒ∞kizler (Papatya - Ne≈üe)</option>
            <option value="yengec">Yenge√ß (Beyaz G√ºl - Masumiyet)</option>
            <option value="aslan">Aslan (Ay√ßi√ßeƒüi - I≈üƒ±ltƒ±)</option>
            <option value="basak">Ba≈üak (Kƒ±r √ái√ßeƒüi - Saf)</option>
            <option value="terazi">Terazi (Ortanca - Denge)</option>
            <option value="akrep">Akrep (Karanfil - Derinlik)</option>
            <option value="yay">Yay (Zambak - Asalet)</option>
            <option value="oglak">Oƒülak (≈ûakayƒ±k - G√º√ß)</option>
            <option value="kova">Kova (Orkide - √ñzg√ºn)</option>
            <option value="balik">Balƒ±k (Nil√ºfer - Hayal)</option>
        </select>
        
        <textarea id="userNote" rows="3" placeholder="Zarfƒ±n i√ßine gizlenecek not..."></textarea>
        
        <button onclick="generateBouquet()">‚ú® Buketi Hazƒ±rla</button>
    </div>

    <div id="sceneContainer">
        
        <div class="bouquet-wrapper">
            <div class="stems"></div>
            
            <div id="flowersContainer"></div>
            
            <div class="vase"></div>
        </div>

        <div class="envelope-container" id="envelopeBox" onclick="openLetter()">
            <div class="envelope">
                <div class="envelope-flap"></div>
                <div class="letter">
                    <span id="finalNote">Notunuz...</span>
                </div>
                <div class="hint">A√ßmak i√ßin dokun üíå</div>
            </div>
        </div>

        <div id="shareArea">
            <button class="share-btn" onclick="copyUrl()">üîó Linki Kopyala ve G√∂nder</button>
            <div id="copyFeedback" style="text-align:center; font-size:12px; color:#666; display:none; margin-top:5px;">Kopyalandƒ±!</div>
        </div>

    </div>

    <script>
        const flowers = {
            'koc':    { url: 'https://cdn-icons-png.flaticon.com/512/740/740878.png', count: 10 },
            'boga':   { url: 'https://cdn-icons-png.flaticon.com/512/1802/1802497.png', count: 12 },
            'ikizler':{ url: 'https://cdn-icons-png.flaticon.com/512/5167/5167364.png', count: 14 },
            'yengec': { url: 'https://cdn-icons-png.flaticon.com/512/2926/2926319.png', count: 10 },
            'aslan':  { url: 'https://cdn-icons-png.flaticon.com/512/1164/1164620.png', count: 8 },
            'basak':  { url: 'https://cdn-icons-png.flaticon.com/512/3503/3503198.png', count: 15 },
            'terazi': { url: 'https://cdn-icons-png.flaticon.com/512/5110/5110429.png', count: 10 },
            'akrep':  { url: 'https://cdn-icons-png.flaticon.com/512/3063/3063167.png', count: 12 },
            'yay':    { url: 'https://cdn-icons-png.flaticon.com/512/5029/5029140.png', count: 10 },
            'oglak':  { url: 'https://cdn-icons-png.flaticon.com/512/4193/4193355.png', count: 9 },
            'kova':   { url: 'https://cdn-icons-png.flaticon.com/512/2855/2855146.png', count: 8 },
            'balik':  { url: 'https://cdn-icons-png.flaticon.com/512/2604/2604993.png', count: 12 }
        };

        function initBackground() {
            const bg = document.getElementById('bgEffects');
            for(let i=0; i<8; i++) {
                const b = document.createElement('div');
                b.className = 'butterfly';
                b.style.left = Math.random() * 100 + 'vw';
                b.style.top = Math.random() * 100 + 'vh';
                b.style.animation = `fly1 ${10 + Math.random()*10}s linear infinite`;
                bg.appendChild(b);
            }
        }
        initBackground();

        function buildBouquet(code) {
            const container = document.getElementById('flowersContainer');
            container.innerHTML = '';
            
            const data = flowers[code];
            if(!data) return;

            // √áƒ∞√áEK YERLE≈ûTƒ∞RME ALGORƒ∞TMASI (Derinlikli)
            for(let i=0; i<data.count; i++) {
                const img = document.createElement('img');
                img.src = data.url;
                img.className = 'flower-img';

                // 1. A√ßƒ± Hesabƒ± (Yelpaze)
                const totalSpread = 120; // Derece
                const angle = - (totalSpread/2) + (i * (totalSpread / (data.count - 1)));
                const randomRot = angle + (Math.random() * 15 - 7.5);

                // 2. Katman Mantƒ±ƒüƒ± (Vazonun Arkasƒ± mƒ± √ñn√º m√º?)
                // i √ßift sayƒ±ysa arkaya, tek sayƒ±ysa √∂ne koyalƒ±m
                const isBack = (i % 2 === 0);
                
                let zIndex, bottomPos, scale;

                if(isBack) {
                    // ARKA KATMAN (Vazonun arkasƒ±nda)
                    zIndex = 10; // Vazo 20'de
                    bottomPos = 160 + Math.random() * 40; // Biraz daha a≈üaƒüƒ±da
                    scale = 0.6 + Math.random() * 0.3; // Biraz daha k√º√ß√ºk
                    img.style.filter = "brightness(0.9)"; // Arkadakiler hafif g√∂lgede
                } else {
                    // √ñN KATMAN (Vazonun √∂n√ºnde, ta≈üƒ±yor)
                    zIndex = 30; // Vazo 20'de
                    bottomPos = 140 + Math.random() * 60; // Vazonun aƒüzƒ±ndan a≈üaƒüƒ± sarkabilir
                    scale = 0.8 + Math.random() * 0.4; // B√ºy√ºk ve g√∂steri≈üli
                }

                img.style.transform = `translateX(-50%) rotate(${randomRot}deg) scale(${scale})`;
                img.style.bottom = bottomPos + 'px';
                img.style.zIndex = zIndex;

                container.appendChild(img);
            }
        }

        function generateBouquet() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            if(!val) { alert("L√ºtfen bir bur√ß se√ßiniz üå∏"); return; }

            // Ekran deƒüi≈ütir
            document.getElementById('creatorPanel').style.display = 'none';
            document.getElementById('sceneContainer').style.display = 'flex';
            
            buildBouquet(val);
            
            // Notu g√ºncelle
            const finalNote = note ? note : "Sana √∂zel bir s√ºrpriz... üíê";
            document.getElementById('finalNote').innerText = finalNote;
            
            // Payla≈ü butonunu g√∂ster
            document.getElementById('shareArea').style.display = 'block';
        }

        // Zarf A√ßma
        let opened = false;
        function openLetter() {
            if(opened) return;
            opened = true;
            document.getElementById('envelopeBox').classList.add('open');
            document.querySelector('.hint').style.display = 'none';
            
            // S√ºrpriz Kelebek Efekti (Zarfƒ±n i√ßinden)
            const b = document.createElement('div');
            b.className = 'butterfly';
            b.style.left = '50%'; b.style.bottom = '100px';
            b.style.zIndex = 200;
            b.style.transition = 'all 2s ease-out';
            document.getElementById('sceneContainer').appendChild(b);
            
            setTimeout(() => {
                b.style.transform = 'translate(100px, -300px) scale(1.5)';
                b.style.opacity = 0;
            }, 100);
        }

        // Link Kopyalama
        function copyUrl() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            
            const url = `${window.location.href.split('?')[0]}?s=${val}&n=${encodeURIComponent(note)}`;
            
            navigator.clipboard.writeText(url).then(() => {
                const fb = document.getElementById('copyFeedback');
                fb.style.display = 'block';
                setTimeout(() => fb.style.display = 'none', 3000);
            });
        }

        // Link ile gelindiyse
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const s = params.get('s');
            const n = params.get('n');

            if(s && flowers[s]) {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(s);
                if(n) document.getElementById('finalNote').innerText = n;
                
                // Butonu deƒüi≈ütir
                const btn = document.querySelector('.share-btn');
                btn.innerText = "üå∏ Sen de Tasarla";
                btn.onclick = () => window.location.href = window.location.pathname;
                document.getElementById('shareArea').style.display = 'block';
            }
        };
    </script>
</body>
</html>
