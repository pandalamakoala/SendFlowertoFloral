<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana Ã–zel Bir SÃ¼rpriz</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Great+Vibes&family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <style>
        /* --- BÃœYÃœLÃœ ATMOSFER --- */
        body {
            font-family: 'Lato', sans-serif;
            background: radial-gradient(circle at center, #fffbf0 0%, #ffe0e9 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden; /* TaÅŸmalarÄ± gizle */
            perspective: 1000px;
        }

        /* UÃ§uÅŸan ParÄ±ltÄ±lar */
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: floatUp 3s linear infinite;
            opacity: 0;
            pointer-events: none;
        }

        /* --- KONTROL PANELÄ° (BAÅžLANGIÃ‡) --- */
        #creatorPanel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.5);
            width: 90%;
            max-width: 400px;
            text-align: center;
            z-index: 1000;
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        h2 { font-family: 'Playfair Display', serif; color: #4a4a4a; margin-bottom: 10px; }
        
        select, textarea, button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 12px;
            border: 1px solid #ebd4d4;
            box-sizing: border-box;
            outline: none;
            font-family: 'Lato', sans-serif;
        }

        button {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
            border: none;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4); }

        /* --- TAM EKRAN SUNUM ALANI --- */
        #fullScreenView {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            display: none; /* JS ile aÃ§Ä±lacak */
            flex-direction: column;
            align-items: center;
            justify-content: flex-end; /* Vazo aÅŸaÄŸÄ±da olsun */
            z-index: 500;
        }

        /* --- VAZO VE Ã‡Ä°Ã‡EKLER --- */
        .bouquet-container {
            position: relative;
            width: 300px;
            height: 500px;
            margin-bottom: 50px;
            animation: slideUp 1s ease-out;
        }

        .vase {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 200px;
            background: linear-gradient(to right, rgba(255,255,255,0.4), rgba(255,255,255,0.1));
            border-radius: 0 0 50px 50px;
            border: 2px solid rgba(255,255,255,0.5);
            backdrop-filter: blur(8px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            z-index: 20;
        }

        .flower-img {
            position: absolute;
            bottom: 180px; /* Vazonun iÃ§inden Ã§Ä±kÄ±ÅŸ noktasÄ± */
            left: 50%;
            width: 150px;
            transform-origin: bottom center;
            transition: all 0.6s ease;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.15));
        }

        /* --- ZARF (ENVELOPE) --- */
        .envelope-wrapper {
            position: absolute;
            bottom: 50px; /* Vazonun Ã¼zerinde dursun */
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            height: 180px;
            perspective: 1000px;
            cursor: pointer;
            z-index: 100; /* En Ã¶nde */
            animation: float 3s ease-in-out infinite;
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            background: #f7d7da;
            border-radius: 5px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .envelope::before { /* Sol-SaÄŸ Kapak */
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 90px 140px 0 140px;
            border-color: transparent transparent #ffeff1 transparent;
            transform: rotate(180deg);
            z-index: 3;
            border-radius: 5px;
        }

        .flap { /* Ãœst Kapak (AÃ§Ä±lacak olan) */
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 100px 140px 0 140px;
            border-color: #f7d7da transparent transparent transparent;
            z-index: 4;
            transform-origin: top;
            transition: transform 0.6s ease-in-out;
        }

        .envelope.open .flap {
            transform: rotateX(180deg);
            z-index: 1; /* Arkaya geÃ§ */
        }

        /* Ä°Ã§indeki Not KaÄŸÄ±dÄ± */
        .letter {
            position: absolute;
            bottom: 0;
            left: 10px;
            width: 260px;
            height: 160px;
            background: white;
            padding: 15px;
            box-sizing: border-box;
            border-radius: 5px;
            z-index: 2;
            transition: transform 0.8s ease 0.4s; /* Kapak aÃ§Ä±ldÄ±ktan sonra Ã§Ä±ksÄ±n */
            font-family: 'Great Vibes', cursive;
            font-size: 22px;
            color: #d63384;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 -5px 10px rgba(0,0,0,0.05);
        }

        .envelope.open .letter {
            transform: translateY(-120px); /* YukarÄ± Ã§Ä±k */
        }

        .click-hint {
            position: absolute;
            bottom: 10px;
            width: 100%;
            text-align: center;
            font-size: 12px;
            color: #888;
            opacity: 0.8;
            animation: blink 2s infinite;
        }

        /* --- SÃœRPRÄ°Z KELEBEK EFEKTÄ° --- */
        .surprise-butterfly {
            position: absolute;
            top: 50%; left: 50%;
            font-size: 30px;
            opacity: 0;
            pointer-events: none;
            z-index: 200;
        }

        @keyframes flyOut {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translate(50px, -200px) rotate(45deg) scale(1.2); opacity: 0; }
        }

        /* --- ARKA PLAN KELEBEKLERÄ° (3D) --- */
        .bg-butterfly {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('https://cdn-icons-png.flaticon.com/512/2909/2909995.png'); /* Pastel kelebek */
            background-size: cover;
            opacity: 0.7;
            animation: flutter 15s linear infinite;
            z-index: 5;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.1));
        }

        /* --- LÄ°NK BUTONU (Sayfa AltÄ±nda) --- */
        #shareContainer {
            position: fixed;
            bottom: 20px;
            z-index: 1000;
            width: 90%;
            max-width: 300px;
            display: none;
            animation: fadeIn 2s ease;
        }

        .share-btn {
            background: white;
            color: #333;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        /* Animasyonlar */
        @keyframes float { 0%,100% {transform: translateX(-50%) translateY(0);} 50% {transform: translateX(-50%) translateY(-10px);} }
        @keyframes blink { 0%,100% {opacity:1;} 50% {opacity:0.4;} }
        @keyframes slideUp { from {transform: translateY(100vh);} to {transform: translateY(0);} }
        @keyframes flutter {
            0% { transform: translate(-10vw, 110vh) rotate(0deg); }
            100% { transform: translate(110vw, -10vh) rotate(45deg); }
        }
        @keyframes floatUp { 0% {transform: translateY(0) scale(1); opacity: 0;} 50% {opacity: 1;} 100% {transform: translateY(-100px) scale(0); opacity: 0;} }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

    </style>
</head>
<body>

    <div id="ambientEffects"></div>

    <div id="creatorPanel">
        <h2>âœ¨ BÃ¼yÃ¼lÃ¼ Buket Tasarla</h2>
        <p style="color:#777; font-size:14px;">Sevdiklerine unutulmaz bir deneyim hazÄ±rla.</p>
        
        <select id="zodiacSelect">
            <option value="">Bir BurÃ§ SeÃ§iniz...</option>
            <option value="koc">KoÃ§ (Lale)</option>
            <option value="boga">BoÄŸa (GÃ¼l)</option>
            <option value="ikizler">Ä°kizler (Papatya)</option>
            <option value="yengec">YengeÃ§ (Beyaz GÃ¼l)</option>
            <option value="aslan">Aslan (AyÃ§iÃ§eÄŸi)</option>
            <option value="basak">BaÅŸak (KÄ±r Ã‡iÃ§eÄŸi)</option>
            <option value="terazi">Terazi (Ortanca)</option>
            <option value="akrep">Akrep (Karanfil)</option>
            <option value="yay">Yay (Zambak)</option>
            <option value="oglak">OÄŸlak (ÅžakayÄ±k)</option>
            <option value="kova">Kova (Orkide)</option>
            <option value="balik">BalÄ±k (NilÃ¼fer)</option>
        </select>
        
        <textarea id="userNote" placeholder="ZarfÄ±n iÃ§ine gizlenecek not..." rows="3"></textarea>

        <button onclick="previewBouquet()">ðŸŒ¹ Buketi HazÄ±rla ve GÃ¶ster</button>
    </div>

    <div id="fullScreenView">
        
        <div class="bouquet-container">
            <div class="vase"></div>
            <div id="flowersContainer"></div>
        </div>

        <div class="envelope-wrapper" id="envelopeWrapper" onclick="openEnvelope()">
            <div class="envelope" id="envelope">
                <div class="flap"></div>
                <div class="letter">
                    <p id="letterContent">Notunuz burada...</p>
                </div>
                <div class="click-hint">AÃ§mak iÃ§in tÄ±kla âœ¨</div>
            </div>
            </div>

        <div id="shareContainer">
            <button class="share-btn" onclick="copyLink()">ðŸ”— Linki Kopyala ve GÃ¶nder</button>
            <div id="copyMsg" style="font-size:12px; margin-top:5px; color:#555; display:none;">KopyalandÄ±!</div>
        </div>

    </div>

    <script>
        /* --- VERÄ°LER --- */
        const flowers = {
            'koc':    { url: 'https://cdn-icons-png.flaticon.com/512/740/740878.png', count: 12 },
            'boga':   { url: 'https://cdn-icons-png.flaticon.com/512/1802/1802497.png', count: 14 },
            'ikizler':{ url: 'https://cdn-icons-png.flaticon.com/512/5167/5167364.png', count: 15 },
            'yengec': { url: 'https://cdn-icons-png.flaticon.com/512/2926/2926319.png', count: 12 },
            'aslan':  { url: 'https://cdn-icons-png.flaticon.com/512/1164/1164620.png', count: 10 },
            'basak':  { url: 'https://cdn-icons-png.flaticon.com/512/3503/3503198.png', count: 16 },
            'terazi': { url: 'https://cdn-icons-png.flaticon.com/512/5110/5110429.png', count: 12 },
            'akrep':  { url: 'https://cdn-icons-png.flaticon.com/512/3063/3063167.png', count: 12 },
            'yay':    { url: 'https://cdn-icons-png.flaticon.com/512/5029/5029140.png', count: 12 },
            'oglak':  { url: 'https://cdn-icons-png.flaticon.com/512/4193/4193355.png', count: 12 },
            'kova':   { url: 'https://cdn-icons-png.flaticon.com/512/2855/2855146.png', count: 10 },
            'balik':  { url: 'https://cdn-icons-png.flaticon.com/512/2604/2604993.png', count: 14 }
        };

        /* --- ATMOSFER OLUÅžTURUCU --- */
        function createAtmosphere() {
            const ambient = document.getElementById('ambientEffects');
            
            // 1. UÃ§uÅŸan Kelebekler (Arka Plan)
            for(let i=0; i<6; i++) {
                const b = document.createElement('div');
                b.className = 'bg-butterfly';
                b.style.left = Math.random() * 100 + 'vw';
                b.style.animationDuration = (10 + Math.random() * 10) + 's'; // FarklÄ± hÄ±zlar
                b.style.animationDelay = Math.random() * 5 + 's';
                ambient.appendChild(b);
            }

            // 2. IÅŸÄ±ltÄ±lar
            setInterval(() => {
                const s = document.createElement('div');
                s.className = 'sparkle';
                s.style.left = Math.random() * 100 + 'vw';
                s.style.top = Math.random() * 100 + 'vh';
                ambient.appendChild(s);
                setTimeout(() => s.remove(), 3000); // Temizle
            }, 500);
        }
        createAtmosphere();

        /* --- Ã‡Ä°Ã‡EK Ã‡Ä°ZÄ°MÄ° --- */
        function drawFlowers(code) {
            const container = document.getElementById('flowersContainer');
            container.innerHTML = '';
            
            const data = flowers[code];
            if(!data) return;

            for(let i=0; i<data.count; i++) {
                const img = document.createElement('img');
                img.src = data.url;
                img.className = 'flower-img';

                // Yelpaze + Rastgelelik
                const angle = -70 + (i * (140 / (data.count - 1))); 
                const randomRot = angle + (Math.random() * 20 - 10);
                const randomHeight = Math.random() * 60; // Boy Ã§eÅŸitliliÄŸi
                const scale = 0.7 + Math.random() * 0.6;
                const zIndex = Math.floor(Math.random() * 40); // Rastgele katman

                img.style.transform = `translateX(-50%) rotate(${randomRot}deg) scale(${scale})`;
                img.style.bottom = (180 + randomHeight) + 'px';
                img.style.zIndex = zIndex;

                container.appendChild(img);
            }
        }

        /* --- ANA AKIÅž --- */
        function previewBouquet() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;

            if(!val) { alert("LÃ¼tfen bir burÃ§ seÃ§ ðŸŒ¸"); return; }

            // 1. Paneli Gizle
            document.getElementById('creatorPanel').style.display = 'none';
            
            // 2. Tam EkranÄ± AÃ§
            const fullScreen = document.getElementById('fullScreenView');
            fullScreen.style.display = 'flex';
            
            // 3. Ã‡iÃ§ekleri Ã‡iz
            drawFlowers(val);

            // 4. Notu Zarfa Koy
            const finalNote = note ? note : "Sana Ã¶zel bir sÃ¼rpriz...";
            document.getElementById('letterContent').innerText = finalNote;

            // 5. Link Butonunu GÃ¶ster
            document.getElementById('shareContainer').style.display = 'block';
        }

        /* --- ZARF AÃ‡MA EFEKTÄ° --- */
        let isOpened = false;
        function openEnvelope() {
            if(isOpened) return;
            isOpened = true;

            const env = document.getElementById('envelope');
            env.classList.add('open');
            document.querySelector('.click-hint').style.display = 'none';

            // SÃ¼rpriz Kelebek Efekti
            const butterfly = document.createElement('div');
            butterfly.innerText = 'ðŸ¦‹';
            butterfly.className = 'surprise-butterfly';
            butterfly.style.animation = 'flyOut 1.5s ease-out forwards';
            document.getElementById('envelopeWrapper').appendChild(butterfly);
        }

        /* --- LINK PAYLAÅžMA --- */
        function copyLink() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            
            const url = `${window.location.href.split('?')[0]}?s=${val}&n=${encodeURIComponent(note)}`;
            
            navigator.clipboard.writeText(url).then(() => {
                const msg = document.getElementById('copyMsg');
                msg.style.display = 'block';
                setTimeout(() => msg.style.display = 'none', 3000);
            });
        }

        /* --- ALICI MODU (Link ile gelince) --- */
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const s = params.get('s'); // Send code
            const n = params.get('n'); // Note

            if(s && flowers[s]) {
                // GÃ¶nderici panelini direkt yok et
                document.getElementById('creatorPanel').style.display = 'none';
                
                // Tam ekranÄ± aÃ§
                const fullScreen = document.getElementById('fullScreenView');
                fullScreen.style.display = 'flex';
                
                // Ã‡iz
                drawFlowers(s);
                
                // Notu ekle
                if(n) document.getElementById('letterContent').innerText = n;
                
                // AlÄ±cÄ±ya "Link Kopyala" butonu gÃ¶sterme, "Sen de Yap" gÃ¶ster
                const shareBtn = document.querySelector('.share-btn');
                shareBtn.innerText = "âœ¨ Sen de Kendi Buketini Tasarla";
                shareBtn.onclick = function() {
                    window.location.href = window.location.pathname; // Ana sayfaya dÃ¶n
                };
                document.getElementById('shareContainer').style.display = 'block';
            }
        };
    </script>
</body>
</html>
