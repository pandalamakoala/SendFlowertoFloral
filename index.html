<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana √ñzel √ái√ßekler</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Great+Vibes&family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <style>
        /* --- ESTETƒ∞K GENEL AYARLAR --- */
        body {
            font-family: 'Lato', sans-serif;
            /* Toz Pembe Arka Plan */
            background: radial-gradient(circle at center, #fce4ec 0%, #f8bbd0 100%);
            margin: 0; padding: 0; min-height: 100vh;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            overflow: hidden; 
            color: #880e4f;
        }

        /* --- ARKA PLAN S√úSLERƒ∞ (EMOJƒ∞) --- */
        .bg-emoji {
            position: absolute;
            pointer-events: none;
            z-index: 0;
            opacity: 0.4; /* Hafif silik dursunlar */
            filter: blur(1px);
            user-select: none;
        }

        /* U√ßan Kelebek Animasyonu */
        @keyframes floatButterfly {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, -50px) rotate(15deg); }
            50% { transform: translate(0, -100px) rotate(-10deg); }
            75% { transform: translate(-100px, -50px) rotate(15deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        /* S√ºz√ºlen √ái√ßek Animasyonu */
        @keyframes floatFlower {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            50% { opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* --- KONTROL PANELƒ∞ --- */
        #creatorPanel {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(136, 14, 79, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.8);
            width: 90%; max-width: 350px;
            text-align: center; z-index: 1000;
            transition: opacity 0.5s ease;
        }
        h2 { font-family: 'Playfair Display', serif; color: #880e4f; margin-bottom: 5px; }
        
        select, textarea {
            width: 100%; padding: 12px; margin: 10px 0;
            border-radius: 12px; border: 1px solid #f48fb1;
            background: rgba(255, 255, 255, 0.8);
            font-family: 'Lato', sans-serif; outline: none; color: #880e4f;
        }
        button {
            width: 100%; padding: 12px; margin-top: 15px;
            background: linear-gradient(135deg, #f48fb1 0%, #f06292 100%);
            color: white; border: none; border-radius: 12px;
            font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(240, 98, 146, 0.4);
            transition: transform 0.2s;
        }
        button:hover { transform: translateY(-2px); }

        /* --- SAHNE --- */
        #sceneContainer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 50px; z-index: 500;
        }

        /* --- BUKET ALANI --- */
        .bouquet-wrapper {
            position: relative; width: 300px; height: 450px;
            margin-bottom: 30px;
            animation: gentleHover 3s ease-in-out infinite;
        }

        /* VAZO (CSS ile √áizim - Resim Yok) */
        .vase {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 140px; height: 190px;
            /* Cam G√∂r√ºn√ºm√º */
            background: linear-gradient(135deg, rgba(255,255,255,0.6), rgba(255,255,255,0.2));
            backdrop-filter: blur(4px);
            border-radius: 0 0 60px 60px;
            border: 2px solid rgba(255,255,255,0.8);
            box-shadow: 0 10px 30px rgba(136, 14, 79, 0.1);
            z-index: 20;
        }
        
        /* √áƒ∞√áEKLER (EMOJƒ∞) */
        .flower-emoji {
            position: absolute; left: 50%; transform-origin: bottom center;
            font-size: 70px; /* Emojileri b√ºy√ºt */
            line-height: 1;
            user-select: none;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
            transition: all 0.5s ease;
        }

        /* SAPLAR */
        .stem {
            position: absolute; bottom: 20px; left: 50%; width: 4px; height: 150px;
            background-color: #81c784; border-radius: 2px;
            transform-origin: bottom center; z-index: 15;
        }

        /* --- ZARF --- */
        .envelope-container {
            position: relative; width: 260px; height: 160px; cursor: pointer;
            z-index: 100;
        }
        .envelope {
            position: relative; width: 100%; height: 100%;
            background: #f06292; border-radius: 8px;
            box-shadow: 0 10px 25px rgba(136, 14, 79, 0.2);
        }
        .flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 130px solid transparent; border-right: 130px solid transparent;
            border-top: 100px solid #e91e63; /* Kapak rengi */
            transform-origin: top; transition: 0.6s ease; z-index: 5;
        }
        .envelope-container.open .flap { transform: rotateX(180deg); z-index: 1; }

        .letter {
            position: absolute; bottom: 10px; left: 10px; width: 240px; height: 140px;
            background: #fff; padding: 20px; box-sizing: border-box; border-radius: 4px;
            font-family: 'Great Vibes', cursive; font-size: 26px; color: #c2185b;
            text-align: center; display: flex; align-items: center; justify-content: center;
            transition: transform 0.6s ease 0.2s; z-index: 2;
            box-shadow: 0 -5px 10px rgba(0,0,0,0.05);
        }
        .envelope-container.open .letter { transform: translateY(-120px); }

        .hint { position: absolute; bottom: 15px; width: 100%; text-align: center; font-size: 13px; color: #fff; animation: pulse 2s infinite; }

        /* --- PAYLA≈û BUTONU --- */
        #shareArea { position: fixed; bottom: 20px; z-index: 1000; display: none; width: 90%; max-width: 300px; }
        .share-btn { background: #fff; color: #c2185b; }

        @keyframes gentleHover { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }
        @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.6;} }
    </style>
</head>
<body>

    <div id="backgroundArea"></div>

    <div id="creatorPanel">
        <h2>üå∏ Sevgi Bah√ßesi</h2>
        <p style="font-size:14px; color:#ad1457;">Toz pembe hayaller ve mis kokulu √ßi√ßekler...</p>
        
        <select id="zodiacSelect">
            <option value="">Bir Bur√ß Se√ßiniz...</option>
            <option value="koc">Ko√ß ‚Ä¢ Lale üå∑</option>
            <option value="boga">Boƒüa ‚Ä¢ G√ºl üåπ</option>
            <option value="ikizler">ƒ∞kizler ‚Ä¢ Papatya üåº</option>
            <option value="yengec">Yenge√ß ‚Ä¢ Beyaz √ái√ßek üíÆ</option>
            <option value="aslan">Aslan ‚Ä¢ Ay√ßi√ßeƒüi üåª</option>
            <option value="basak">Ba≈üak ‚Ä¢ Ba≈üak üåæ</option>
            <option value="terazi">Terazi ‚Ä¢ Pembe √ái√ßek üå∏</option>
            <option value="akrep">Akrep ‚Ä¢ Solmu≈ü G√ºl ü•Ä</option>
            <option value="yay">Yay ‚Ä¢ Hibiskus üå∫</option>
            <option value="oglak">Oƒülak ‚Ä¢ Rozet üèµÔ∏è</option>
            <option value="kova">Kova ‚Ä¢ Nil√ºfer ü™∑</option>
            <option value="balik">Balƒ±k ‚Ä¢ Buket üíê</option>
        </select>
        
        <textarea id="userNote" rows="3" placeholder="Zarfƒ±n i√ßine saklanacak not..."></textarea>
        
        <button onclick="generateBouquet()">‚ú® Buketi Hazƒ±rla</button>
    </div>

    <div id="sceneContainer">
        <div class="bouquet-wrapper">
            <div id="flowersContainer"></div>
            <div class="vase"></div>
        </div>

        <div class="envelope-container" id="envelopeBox" onclick="openLetter()">
            <div class="envelope">
                <div class="flap"></div>
                <div class="letter">
                    <span id="finalNote">Notunuz...</span>
                </div>
                <div class="hint">A√ßmak i√ßin dokun üíå</div>
            </div>
        </div>

        <div id="shareArea">
            <button class="share-btn" onclick="copyUrl()">üîó Linki Kopyala</button>
            <div id="copyFeedback" style="text-align:center; font-size:12px; color:#ad1457; display:none; margin-top:5px;">Kopyalandƒ±! üíñ</div>
        </div>
    </div>

    <script>
        /* --- ARKA PLAN (SADECE EMOJƒ∞) --- */
        function createBackground() {
            const container = document.getElementById('backgroundArea');
            const emojis = ['ü¶ã', 'üå∏', '‚ú®', 'üíÆ']; // Kelebek ve minik √ßi√ßekler
            
            // 20 Tane rastgele emoji olu≈ütur
            for(let i=0; i<20; i++) {
                const el = document.createElement('div');
                const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
                el.innerText = randomEmoji;
                el.className = 'bg-emoji';
                
                // Rastgele Konum
                el.style.left = Math.random() * 100 + 'vw';
                el.style.top = Math.random() * 100 + 'vh';
                
                // Rastgele Boyut
                const size = 20 + Math.random() * 30; // 20px ile 50px arasƒ±
                el.style.fontSize = size + 'px';

                // Animasyon ata
                if(randomEmoji === 'ü¶ã') {
                    // Kelebekler u√ßsun
                    el.style.animation = `floatButterfly ${10 + Math.random() * 10}s linear infinite`;
                    el.style.opacity = 0.8;
                } else {
                    // √ái√ßekler a≈üaƒüƒ± s√ºz√ºls√ºn
                    el.style.animation = `floatFlower ${15 + Math.random() * 20}s linear infinite`;
                    el.style.animationDelay = Math.random() * 5 + 's';
                }

                container.appendChild(el);
            }
        }
        createBackground();

        /* --- BUKET OLU≈ûTURMA --- */
        const flowers = {
            'koc': 'üå∑', 'boga': 'üåπ', 'ikizler': 'üåº', 'yengec': 'üíÆ',
            'aslan': 'üåª', 'basak': 'üåæ', 'terazi': 'üå∏', 'akrep': 'ü•Ä',
            'yay': 'üå∫', 'oglak': 'üèµÔ∏è', 'kova': 'ü™∑', 'balik': 'üíê'
        };

        function buildBouquet(code) {
            const container = document.getElementById('flowersContainer');
            container.innerHTML = '';
            const emoji = flowers[code] || 'üå∏';
            const count = 12; // √ái√ßek sayƒ±sƒ±

            for(let i=0; i<count; i++) {
                // SAP (Ye≈üil √ßizgi)
                const stem = document.createElement('div');
                stem.className = 'stem';
                
                // √áƒ∞√áEK (Emoji)
                const flower = document.createElement('div');
                flower.innerText = emoji;
                flower.className = 'flower-emoji';

                // YERLE≈ûƒ∞M HESAPLAMALARI
                const spread = 100; // Yelpaze geni≈üliƒüi
                const angle = -(spread/2) + (i * (spread/(count-1)));
                const randomRot = angle + (Math.random() * 10 - 5);
                
                // Vazonun arkasƒ± mƒ± √∂n√º m√º?
                const isBack = (i % 2 === 0);
                const zIndex = isBack ? 10 : 30; // Vazo (20) ortada kalsƒ±n
                const bottomPos = isBack ? 150 : 120; // Arkadakiler yukarƒ±da
                const scale = 0.8 + Math.random() * 0.4;

                // Sapƒ± d√∂nd√ºr
                stem.style.transform = `translateX(-50%) rotate(${randomRot}deg)`;
                stem.style.height = (140 + Math.random() * 40) + 'px'; // Rastgele uzunluk
                stem.style.zIndex = zIndex - 1;

                // √ái√ßeƒüi yerle≈ütir
                flower.style.transform = `translateX(-50%) rotate(${randomRot}deg) scale(${scale})`;
                flower.style.bottom = (bottomPos + Math.random() * 30) + 'px';
                flower.style.zIndex = zIndex;

                container.appendChild(stem);
                container.appendChild(flower);
            }
        }

        function generateBouquet() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            if(!val) { alert("L√ºtfen bir √ßi√ßek se√ßin üå∏"); return; }

            document.getElementById('creatorPanel').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(val);
            }, 500);

            const finalNote = note ? note : "Sana kocaman sevgiler... üíñ";
            document.getElementById('finalNote').innerText = finalNote;
            document.getElementById('shareArea').style.display = 'block';
        }

        let opened = false;
        function openLetter() {
            if(opened) return; opened = true;
            document.getElementById('envelopeBox').classList.add('open');
            document.querySelector('.hint').style.display = 'none';
            
            // Zarf a√ßƒ±lƒ±nca ekstra kelebekler u√ßsun
            for(let i=0; i<5; i++) {
                const b = document.createElement('div');
                b.innerText = 'ü¶ã';
                b.style.position = 'absolute';
                b.style.left = '50%'; b.style.bottom = '150px';
                b.style.fontSize = '30px'; b.style.zIndex = 100;
                b.style.transition = 'all 1.5s ease-out';
                document.getElementById('sceneContainer').appendChild(b);
                
                setTimeout(() => {
                    b.style.transform = `translate(${Math.random()*200-100}px, -400px) rotate(${Math.random()*90}deg)`;
                    b.style.opacity = 0;
                }, 50);
            }
        }

        function copyUrl() {
            const url = `${window.location.href.split('?')[0]}?s=${document.getElementById('zodiacSelect').value}&n=${encodeURIComponent(document.getElementById('userNote').value)}`;
            navigator.clipboard.writeText(url).then(() => {
                const fb = document.getElementById('copyFeedback');
                fb.style.display = 'block'; setTimeout(() => fb.style.display = 'none', 3000);
            });
        }

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const s = params.get('s'); const n = params.get('n');
            if(s) {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(s);
                if(n) document.getElementById('finalNote').innerText = n;
                const btn = document.querySelector('.share-btn');
                btn.innerText = "üå∏ Sen de Tasarla";
                btn.onclick = () => window.location.href = window.location.pathname;
                document.getElementById('shareArea').style.display = 'block';
            }
        };
    </script>
</body>
</html>
