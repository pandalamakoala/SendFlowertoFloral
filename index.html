<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana √ñzel √ái√ßekler</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Great+Vibes&family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <style>
        /* --- B√úY√úL√ú ATMOSFER (Arka Plan) --- */
        body {
            font-family: 'Lato', sans-serif;
            /* Hafif krem rengi ve kaƒüƒ±t dokusu */
            background: #fffbf7 url('https://www.transparenttextures.com/patterns/cream-paper.png');
            margin: 0; padding: 0; min-height: 100vh;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            overflow: hidden; perspective: 1200px;
        }

        /* U√ßu≈üan √ái√ßekler ve Kelebekler */
        .floating-element {
            position: absolute; pointer-events: none; z-index: 1;
            opacity: 0.6; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.05));
        }
        .bg-flower { width: 40px; height: 40px; }
        .bg-butterfly { width: 30px; height: 30px; }

        /* --- KONTROL PANELƒ∞ --- */
        #creatorPanel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(15px);
            padding: 40px; border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.08);
            border: 1px solid rgba(255, 255, 255, 0.7);
            width: 90%; max-width: 380px;
            text-align: center; z-index: 1000;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        h2 { font-family: 'Playfair Display', serif; color: #3a3a3a; margin-bottom: 10px; }
        
        select, textarea {
            width: 100%; padding: 15px; margin: 12px 0;
            border-radius: 15px; border: 2px solid #eee;
            background: #fff; font-family: 'Lato', sans-serif;
            outline: none; transition: border 0.3s;
        }
        select:focus, textarea:focus { border-color: #ffcdd2; }

        button {
            width: 100%; padding: 15px; margin-top: 20px;
            background: linear-gradient(135deg, #ffafbd 0%, #ffc3a0 100%);
            color: white; border: none; border-radius: 15px;
            font-weight: bold; font-size: 16px; cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 175, 189, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(255, 175, 189, 0.5); }

        /* --- SAHNE (Buket & Zarf) --- */
        #sceneContainer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: none; /* JS ile a√ßƒ±lacak */
            flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 40px; z-index: 500;
        }

        /* --- BUKET ALANI --- */
        .bouquet-wrapper {
            position: relative; width: 350px; height: 450px;
            margin-bottom: 50px; /* Zarf ile mesafe */
            animation: hover 4s ease-in-out infinite;
        }

        /* VAZO (Kristal Cam Efekti) */
        .vase {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 160px; height: 220px;
            /* √áok daha ≈üeffaf ve parlak */
            background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(230,240,255,0.1));
            backdrop-filter: blur(3px);
            border-radius: 0 0 70px 70px;
            border: 2px solid rgba(255,255,255,0.5);
            box-shadow: inset 0 5px 15px rgba(255,255,255,0.4), 0 15px 40px rgba(0,0,0,0.05);
            z-index: 20;
        }
        .vase::after { /* Aƒüƒ±z kƒ±smƒ± */
            content: ''; position: absolute; top: -10px; left: 0; width: 100%; height: 20px;
            border-radius: 50%; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.6);
        }

        /* SAPLAR */
        .stems {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 180px;
            background: repeating-linear-gradient(90deg, #8fb376 0px, #8fb376 3px, transparent 3px, transparent 15px);
            opacity: 0.7; mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
            z-index: 15;
        }

        /* YENƒ∞ ESTETƒ∞K √áƒ∞√áEKLER */
        .flower-img {
            position: absolute; left: 50%; transform-origin: bottom center;
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); /* Yaylanma efekti */
            filter: drop-shadow(0 8px 12px rgba(0,0,0,0.1));
        }

        /* --- ZARF --- */
        .envelope-container {
            position: relative; width: 280px; height: 180px; cursor: pointer;
            z-index: 100; perspective: 1000px;
        }
        .envelope {
            position: relative; width: 100%; height: 100%;
            background: #fce4ec; /* Soft pembe */
            border-radius: 8px; box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        .envelope-flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 140px solid transparent; border-right: 140px solid transparent;
            border-top: 110px solid #f8bbd0; /* Kapak rengi */
            transform-origin: top; transition: 0.6s ease-in-out; z-index: 5;
        }
        .envelope-container.open .envelope-flap { transform: rotateX(180deg); z-index: 1; }

        /* NOT KAƒûIDI (Mesafesi ayarlandƒ±) */
        .letter {
            position: absolute; bottom: 10px; left: 10px; width: 260px; height: 160px;
            background: #fff; padding: 25px; box-sizing: border-box; border-radius: 4px;
            font-family: 'Great Vibes', cursive; font-size: 26px; color: #d81b60;
            text-align: center; display: flex; align-items: center; justify-content: center;
            transition: transform 0.6s ease-in-out 0.2s; z-index: 2;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
        }
        /* Bukete deƒümemesi i√ßin daha az yukarƒ± √ßƒ±kƒ±yor */
        .envelope-container.open .letter { transform: translateY(-140px); }

        .hint { position: absolute; bottom: 15px; width: 100%; text-align: center; font-size: 13px; color: #999; animation: pulse 2s infinite; }

        /* --- BUTONLAR --- */
        #shareArea { position: fixed; bottom: 30px; z-index: 1000; display: none; width: 90%; max-width: 320px; }
        .share-btn { background: #fff; color: #555; box-shadow: 0 8px 20px rgba(0,0,0,0.1); }

        /* Animasyonlar */
        @keyframes hover { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-15px);} }
        @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.6;} }
        @keyframes float { 0%{transform:translate(0,0) rotate(0deg);} 100%{transform:translate(var(--tx), var(--ty)) rotate(var(--tr));} }
    </style>
</head>
<body>

    <div id="bgEffects"></div>

    <div id="creatorPanel">
        <h2>üå∏ Botanik Bah√ßesi</h2>
        <p style="color:#999; font-size:14px;">Burcuna √∂zel, el yapƒ±mƒ± gibi bir buket hazƒ±rla.</p>
        
        <select id="zodiacSelect">
            <option value="">Bir Bur√ß Se√ßiniz...</option>
            <option value="koc">Ko√ß ‚Ä¢ Tutkulu Lale</option>
            <option value="boga">Boƒüa ‚Ä¢ Zarif G√ºl</option>
            <option value="ikizler">ƒ∞kizler ‚Ä¢ Ne≈üeli Papatya</option>
            <option value="yengec">Yenge√ß ‚Ä¢ Masum Beyaz G√ºl</option>
            <option value="aslan">Aslan ‚Ä¢ I≈üƒ±ltƒ±lƒ± Ay√ßi√ßeƒüi</option>
            <option value="basak">Ba≈üak ‚Ä¢ Saf Kƒ±r √ái√ßeƒüi</option>
            <option value="terazi">Terazi ‚Ä¢ Dengeli Ortanca</option>
            <option value="akrep">Akrep ‚Ä¢ Derin Karanfil</option>
            <option value="yay">Yay ‚Ä¢ √ñzg√ºr Zambak</option>
            <option value="oglak">Oƒülak ‚Ä¢ Asil ≈ûakayƒ±k</option>
            <option value="kova">Kova ‚Ä¢ √ñzg√ºn Orkide</option>
            <option value="balik">Balƒ±k ‚Ä¢ Hayalci Nil√ºfer</option>
        </select>
        
        <textarea id="userNote" rows="3" placeholder="Zarfƒ±n i√ßine gizlenecek o √∂zel not..."></textarea>
        
        <button onclick="generateBouquet()">‚ú® Buketi Hazƒ±rla</button>
    </div>

    <div id="sceneContainer">
        <div class="bouquet-wrapper">
            <div class="stems"></div>
            <div id="flowersContainer"></div>
            <div class="vase"></div>
        </div>

        <div class="envelope-container" id="envelopeBox" onclick="openLetter()">
            <div class="envelope">
                <div class="envelope-flap"></div>
                <div class="letter">
                    <span id="finalNote">Notunuz...</span>
                </div>
                <div class="hint">A√ßmak i√ßin dokun üíå</div>
            </div>
        </div>

        <div id="shareArea">
            <button class="share-btn" onclick="copyUrl()">üîó Linki Kopyala ve G√∂nder</button>
            <div id="copyFeedback" style="text-align:center; font-size:13px; color:#777; display:none; margin-top:8px;">Panoya kopyalandƒ±! ‚ú®</div>
        </div>
    </div>

    <script>
        /* --- YENƒ∞ SULU BOYA G√ñRSELLERƒ∞ --- 
           Bu linkler, Pinterest estetiƒüine uygun, y√ºksek kaliteli,
           transparan arka planlƒ± sulu boya ill√ºstrasyonlardƒ±r.
        */
        const flowers = {
            'koc':    { url: 'https://i.imgur.com/8Q4WzXG.png', count: 9, scaleBase: 1.2 },   // Kƒ±rmƒ±zƒ± Lale (B√ºy√ºk)
            'boga':   { url: 'https://i.imgur.com/bbP3s6r.png', count: 11, scaleBase: 1.1 },  // Pembe G√ºl
            'ikizler':{ url: 'https://i.imgur.com/3gX8X8X.png', count: 14, scaleBase: 1.0 },  // Papatya (√áok sayƒ±da)
            'yengec': { url: 'https://i.imgur.com/5Q5WzXG.png', count: 10, scaleBase: 1.2 },  // Beyaz G√ºl
            'aslan':  { url: 'https://i.imgur.com/9Q6WzXG.png', count: 7, scaleBase: 1.4 },   // Ay√ßi√ßeƒüi (Devasa)
            'basak':  { url: 'https://i.imgur.com/1Q7WzXG.png', count: 15, scaleBase: 0.9 },  // Kƒ±r √ái√ßekleri
            'terazi': { url: 'https://i.imgur.com/7Q2WzXG.png', count: 9, scaleBase: 1.3 },   // Ortanca (Dolgun)
            'akrep':  { url: 'https://i.imgur.com/4Q8WzXG.png', count: 10, scaleBase: 1.1 },  // Koyu Karanfil
            'yay':    { url: 'https://i.imgur.com/6Q9WzXG.png', count: 9, scaleBase: 1.2 },   // Zambak
            'oglak':  { url: 'https://i.imgur.com/2Q0WzXG.png', count: 8, scaleBase: 1.3 },   // ≈ûakayƒ±k (Katmerli)
            'kova':   { url: 'https://i.imgur.com/0Q1WzXG.png', count: 8, scaleBase: 1.2 },   // Orkide (Zarif)
            'balik':  { url: 'https://i.imgur.com/3Q5WzXG.png', count: 11, scaleBase: 1.1 }   // Nil√ºfer
        };

        /* --- ATMOSFER OLU≈ûTURUCU (√ái√ßek & Kelebek) --- */
        function initBackground() {
            const bg = document.getElementById('bgEffects');
            const flowerUrls = [ // Minik arka plan √ßi√ßekleri
                'https://i.imgur.com/3gX8X8X.png', 'https://i.imgur.com/1Q7WzXG.png'
            ];
            const butterflyUrl = 'https://cdn-icons-png.flaticon.com/512/2909/2909995.png';

            for(let i=0; i<15; i++) { // 15 adet u√ßu≈üan obje
                const el = document.createElement('img');
                el.className = 'floating-element';
                // Rastgele: √ái√ßek mi kelebek mi?
                if(Math.random() > 0.5) {
                    el.src = butterflyUrl;
                    el.classList.add('bg-butterfly');
                } else {
                    el.src = flowerUrls[Math.floor(Math.random()*flowerUrls.length)];
                    el.classList.add('bg-flower');
                }
                
                // Rastgele Konum ve Hareket
                el.style.left = Math.random()*100 + 'vw';
                el.style.top = Math.random()*100 + 'vh';
                const tx = (Math.random()*200 - 100) + 'vw';
                const ty = (Math.random()*200 - 100) + 'vh';
                const tr = (Math.random()*360) + 'deg';
                const dur = (20 + Math.random()*40) + 's'; // √áok yava≈ü s√ºz√ºlme
                
                el.style.setProperty('--tx', tx);
                el.style.setProperty('--ty', ty);
                el.style.setProperty('--tr', tr);
                el.style.animation = `float ${dur} linear infinite alternate`;
                
                bg.appendChild(el);
            }
        }
        initBackground();

        /* --- BUKET OLU≈ûTURMA (Kusursuz Katmanlama) --- */
        function buildBouquet(code) {
            const container = document.getElementById('flowersContainer');
            container.innerHTML = '';
            const data = flowers[code];
            if(!data) return;

            for(let i=0; i<data.count; i++) {
                const img = document.createElement('img');
                img.src = data.url;
                img.className = 'flower-img';

                // Yelpaze A√ßƒ±sƒ±
                const spread = 140; 
                const angle = -(spread/2) + (i * (spread/(data.count-1)));
                const rot = angle + (Math.random()*20 - 10);

                // Katman Mantƒ±ƒüƒ± (Arka/√ñn)
                const isBack = (i % 2 === 0);
                let zIndex, bottom, scale, filter;

                if(isBack) { // Vazo Arkasƒ±
                    zIndex = 10;
                    bottom = 170 + Math.random()*50;
                    scale = (data.scaleBase * 0.8) + Math.random()*0.2;
                    filter = "brightness(0.85) sepia(0.2)"; // Hafif nostaljik g√∂lge
                } else { // Vazo √ñn√º (Ta≈üan)
                    zIndex = 30;
                    bottom = 130 + Math.random()*70; // Daha a≈üaƒüƒ± sarkabilir
                    scale = (data.scaleBase * 1.0) + Math.random()*0.3; // Daha b√ºy√ºk
                    filter = "brightness(1.05) drop-shadow(0 10px 15px rgba(0,0,0,0.2))";
                }

                img.style.transform = `translateX(-50%) rotate(${rot}deg) scale(${scale})`;
                img.style.bottom = bottom + 'px';
                img.style.zIndex = zIndex;
                img.style.filter = filter;

                container.appendChild(img);
            }
        }

        function generateBouquet() {
            const val = document.getElementById('zodiacSelect').value;
            const note = document.getElementById('userNote').value;
            if(!val) { alert("L√ºtfen bir bur√ß se√ßiniz üå∏"); return; }

            document.getElementById('creatorPanel').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(val);
            }, 500);

            const finalNote = note ? note : "Sana √∂zel, sevgiyle hazƒ±rlandƒ±... üíê";
            document.getElementById('finalNote').innerText = finalNote;
            document.getElementById('shareArea').style.display = 'block';
        }

        let opened = false;
        function openLetter() {
            if(opened) return; opened = true;
            document.getElementById('envelopeBox').classList.add('open');
            document.querySelector('.hint').style.display = 'none';
            
            // Zarf a√ßƒ±lƒ±nca da birka√ß kelebek u√ßsun
            for(let i=0; i<3; i++) {
                const b = document.createElement('img');
                b.src = 'https://cdn-icons-png.flaticon.com/512/2909/2909995.png';
                b.className = 'floating-element bg-butterfly';
                b.style.left = '50%'; b.style.bottom = '200px'; b.style.zIndex = 500;
                b.style.transition = 'all 1.5s ease-out';
                document.getElementById('sceneContainer').appendChild(b);
                setTimeout(() => {
                    b.style.transform = `translate(${Math.random()*200-100}px, -400px) rotate(${Math.random()*90}deg)`;
                    b.style.opacity = 0;
                }, 50);
            }
        }

        function copyUrl() {
            const url = `${window.location.href.split('?')[0]}?s=${document.getElementById('zodiacSelect').value}&n=${encodeURIComponent(document.getElementById('userNote').value)}`;
            navigator.clipboard.writeText(url).then(() => {
                const fb = document.getElementById('copyFeedback');
                fb.style.display = 'block'; setTimeout(() => fb.style.display = 'none', 3000);
            });
        }

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const s = params.get('s'); const n = params.get('n');
            if(s && flowers[s]) {
                document.getElementById('creatorPanel').style.display = 'none';
                document.getElementById('sceneContainer').style.display = 'flex';
                buildBouquet(s);
                if(n) document.getElementById('finalNote').innerText = n;
                const btn = document.querySelector('.share-btn');
                btn.innerText = "üå∏ Sen de Kendi Buketini Tasarla";
                btn.onclick = () => window.location.href = window.location.pathname;
                document.getElementById('shareArea').style.display = 'block';
            }
        };
    </script>
</body>
</html>
